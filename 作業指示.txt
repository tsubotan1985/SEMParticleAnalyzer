## 全体概要と留意事項
- SEM画像(Tiff,PNG,BMP,JPG等)を指定して読み込み、WebUI上で対話的に粒径分布の抽出が可能なアプリを作成する。
- Dockerで動かしたい
- .clinerulesを遵守
- 各工程はタブ等の画面切り替えで切り替える

## 作業フロー
- WebUIを起動する
― WebUIには、Language選択画面があり、日本語と英語を選択可能。デフォルトは日本語。Language選択の部分は、言語選択ではなく”Language”と表示（外国人にも読めるようにするので）
- 言語選択の結果はGUIだけでなく、出力ファイルのパラメータ名やカラム名等にも反映される。

### フロー1 画像読み込み
- エクスプローラでファイルを指定して読み込む(画像1とする)
- 読み込んだ画像を画面上に表示する。表示されない場合は、表示ボタンで明示的に再表示可能。
- SEM画像(画像1)のスケール(何μmが何ピクセルに相当するか)は通常読み込んだTiff画像の右下に表示されている。ユーザーが画像上に赤い線を水平方向にドラッグして伸ばし、その長さが何μmに相当するかを入力ボックスで指定する。
- 画像の読み込みが行われると、それまでワークスペースにあったほかの画像はリセットされる。

### フロー2 画像調整
- 読み込んだ画像（画像1）に対して、前処理を行う。
- 前処理はガウシアンフィルタ、メディアンフィルタ、ブラックポイントとホワイトポイントの輝度指定、コントラスト補正、等が可能
- 前処理は自動設定（事後の2値化がを容易にする観点）ボタンで自動設定した後、ユーザーが各パラメータのバーを操作することで変更可能。
- パラメータを自動、または手動で設定した後、適用ボタンを押すと、前処理結果が表示される。ユーザーの満足する結果となった場合には、その画像を画像2として、次の工程で使用する。

### フロー3 粒子検出
- 画像2に対して、自動解析または手動調整により粒子検出を行う。
- 画像の極性はユーザーが選択可能（白地に黒い粒子、黒地に白い粒子）
- 画像はSEM画像なので、下部に倍率やスケールなどの情報があり、粒子検出の妨げになる可能性がある。デフォルトでは下部6.5%を関心領域から除外する。この領域はバーで調整可能。
- 検出閾値はOtsu法、Li法、Yen法、Triangle法、Isodata法、手動設定が選択可能。自動解析を行うと、前者5つの自動比較と選択が行われる。手動設定を選択すると、下のバーで検出パラメータを調整可能。
- 手動検出パラメータとしては閾値の輝度、最小面積、最大面積、最小円形度。最小円形度は0.02刻みで変更可能。
- 粒子を検出し、仮の結果を画面上にオーバーレイする。一度オーバーレイした後に、ユーザーがコントラストや閾値等の粒子検出パラメータを調整可能
- 複数の粒子が重なっているところを右クリックすると、メニューが開き、2つの粒子にセグメンテーションできる機能がある
- ユーザーが結果に満足した場合、その画像を画像3として次工程で粒径解析などに用いる。

### フロー4 粒径解析
- 粒径のヒストグラムが表示される。粒径ヒストグラム上には、短辺、長辺、短辺と長辺の平均、等価直径がプロットされる。プロットは2方法で行い、一つ目は横軸が実数スケール、もう一つは対数スケール。
- 粒径分布の統計情報を表示する。統計には幾何平均（μm）幾何標準偏差（μm）を含む。
- ダウンロードボタンを設定(粒径の画像ダウンロードとCSVダウンロード)。レポートのHTML出力も可能。
